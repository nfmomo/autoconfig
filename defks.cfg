# Kickstart file automatically generated by anaconda.
#mediacheck
install
cdrom
#lang zh_CN.GBK
#langsupport zh_CN.GBK
keyboard us
#text
#xconfig --depth=32 --resolution=1024x768 --defaultdesktop=GNOME
#network --bootproto=dhcp
firewall --disabled
authconfig --enableshadow --enablemd5
#mouse generic3ps/2
selinux --enforcing
#rootpw --iscrypted $1$pNNscjJf$lbEhP.o8KiaJ.gie9eexx1
timezone --utc Asia/Shanghai
bootloader --location=mbr --append="crashkernel=auto fsckroot "
firstboot --disable
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --linux --drives=sda
#part /boot --fstype ext4 --size=100 --ondisk=sda
#part pv.9 --size=0 --grow --ondisk=sda
#volgroup VolGroup00 --pesize=32768 pv.9
#logvol swap --fstype swap --name=LogVol01 --vgname=VolGroup00 --size=224 --grow --maxsize=448
#logvol / --fstype ext4 --name=LogVol00 --vgname=VolGroup00 --size=1024 --grow

#zerombr yes
#clearpart --all --drives=hda --initlabel
#part /boot --fstype ext4 --size=100 --ondisk=hda
#part pv.9 --size=0 --grow --ondisk=hda
#volgroup VolGroup00 --pesize=32768 pv.9
#logvol swap --fstype swap --name=LogVol01 --vgname=VolGroup00 --size=1000 --grow --maxsize=2000
#logvol / --fstype ext4 --name=LogVol00 --vgname=VolGroup00 --size=1024 --grow

%packages --ignoremissing
@Base
@Debugging Tools
@Directory Client
@Java Platform
@Network file system client
@Performance Tools
@Perl Support
@Printing client
@Desktop Debugging and Perform
@Graphical Administration Tools
@X Window System
@Graphics Creation Tools
@Internet Browser
@Technical Writing
@Development
@Additional Development
@FTP server
@Web Server
@Legacy UNIX Compatibility
@init system
@Compatibility Libraries
@System Administration Tools
@Directory Server
@Optional packages
@Hardware Monitoring Utilities
@Network Infrastructure Server
@GNOME
@Platform Development
@Remote Desktop Clients
@Other
krb5-libs
libgcc
nss
fonts
ncurses-libs
libstdc++
openldap
openssl
pam
redhat-lsb
zlib
-gnome-initial-setup
glibc-devel.i686
libXp.i686
libXtst.i686
libstdc++.i686
libXt.i686
libXt-devel.i686
init
tree
libaio.i686
libaio-devel.i686
compat-libstdc++-33.i686
libtool-ltdl.i686
ncurses-libs.i686
readline.i686
unixODBC.i686
unixODBC-devel.i686
openssl098e.i686
audit-libs.i686
cracklib.i686
libselinux.i686
zlib.i686
keyutils-libs.i686
krb5-libs.i686
libcom_err.i686
openmotif
xterm
lftp
-opal
-kdegraphics-devel
-kdelibs-devel
-kdenetwork-devel
-kdepim-devel
-kdepimlibs-devel
-kdesdk-devel
-kde-workspace-devel
-gnome-session-xsession
%end

%post
plymouth-set-default-theme -R charge
/sbin/chkconfig --level 2345 bluetooth off
/sbin/chkconfig --level 2345 libvirt-guests off
/bin/systemctl disable NetworkManager.service >/dev/null 2>&1
/bin/systemctl disable nfs.target >/dev/null 2>&1
/bin/systemctl disable cups.service >/dev/null 2>&1
/bin/systemctl disable iscsid.socket >/dev/null 2>&1
/bin/systemctl disable postfix.service >/dev/null 2>&1
/bin/systemctl disable iscsiuio.socket >/dev/null 2>&1
/bin/systemctl disable ModemManager.service >/dev/null 2>&1
/bin/systemctl disable packagekit-offline-update.service >/dev/null 2>&1
# disable libvirt 
/bin/systemctl disable libvirtd  >/dev/null 2>&1
if [ -f /etc/init.d/multipathd ]; then
   /sbin/chkconfig  --level 2345 multipathd  off
fi

#modify for EC:611004256216
if [ -f /usr/sbin/tuned-cgsl ];then
    /usr/sbin/tuned-cgsl
	/usr/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg
fi

#avoid packagekitd to create prepared-update file EC:611004060502
if [ -f /etc/PackageKit/PackageKit.conf ];then
    sed -i "s/WritePreparedUpdates=true/WritePreparedUpdates=false/g" /etc/PackageKit/PackageKit.conf
fi

#modify for EC:611004138020
/usr/local/sbin/cgsl-fix-es1000 -u

%end
#remove gnome-initial-setup
#%post
#sed -i '/daemon/d' /etc/gdm/custom.conf
#echo  "[daemon]">>/etc/gdm/custom.conf
#echo  "InitialSetupEnable=False">>/etc/gdm/custom.conf
#%end
